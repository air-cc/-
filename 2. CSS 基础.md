# CSS 基础

CSS3 被划分成多个独立的模块，如：Selectors 选择器模块、Value and Units 值和单元模块、Box Alignment 框对齐模块，等等。各模块独立发布版本，所以 CSS3 是一系列处于不同状态的独立模块的集合，故不会有 CSS4 出现。

## 为 CSS 编写 HTML

不要使用只用于改变的元素 如：`<font>` `<b>` `<i>`

不要使用 `<table>` 进行网页布局

避免在元素中使用仅用于修饰外观的属性 如：`background` `bgcolor`

不要滥用 `<br>`

不要滥用 `<div>`，尽量使用更语义化的标签 如：`<header>` `<nav>` `<article>` `<footer>`

HTML 文档声明不正确，会使浏览器进入“怪异模式”（浏览器兼容早期浏览器的模式）

## 创建样式和样式表

样式格式：选择器 {声明-属性：声明-值;}

行内样式：在起始标签中定义 如: `<h1 style="color: #666666;">`；

内部样式表：在 `<head>` 标签中定义 如：

``` HTML
	<head>
		<style>
			h1 {color: #66666;}
		</style>
	</head>
```

外部样式：在 `head` 元素中链接进来 如：

```
	<head>
		<link ref="stylesheet" href="url/to/css-file.css">
	</head>
```

另外还可通过 `@import` 指令来导入外部样式表。如下面的方式可同时使用外部样式表与内部样式表，不过注意：1. @import 指令必须在 CSS 规则之前，因为浏览器会忽略 CSS 规则之后引入的样式表；2. @import 方法在某些情况会下拖慢样式表下载速度，故没有特别需要，最好使用 <link> 方法。

```
	<style>
		@import url(url/to/css-file.css);
		@import url(url/to/css-file_2.css);

		h1 {
			color: #666666;
		}
	</style>
```

样式表注释：`/*  只是内容 */`

链接外部样式表的位置：由于许多 `javaScript` 文件依赖样式表，所以一般先添加 CSS 文件。

## 选择器

标签选择器：也称类型选择器，元素选择器。即已元素的标签的为选择对象的规则，用于整体控制。如：

```
p {
	color: #000000
}
```

类选择器：精确控制某些元素，注意：在类的命名上必须以字母开头且类名区分大小写

```
--- HTML ---
<p class="special">...</p>

--- CSS ---
.special { ... }

```

ID选择器：控制特殊的页面元素。该选择器对基于 JavaScript 或非常冗长的页面有特别的用途，否则应更倾向于使用类选择器（Web社区整逐步放弃使用ID选择器）。另外，元素的ID值还可用于页面的位置跳转，例:

```
--- URL ---
url#special

--- HTML ---
<p id="special"> ... </p>

--- CSS ---
#special { ... }
```

群组选择器：通过一个选择器列表来使同一套样式被应用到多个选择器中，例：

```
p, .special, #special { ... }
```

通用选择器：选中页面中的所有标签。用法：`* { ... }`

派生选择器：用于选中某个标签下的标签，常用于格式化代码模块, 这里要区别 `p .special` 和 `p.special`，前者选中 p 标签下的派生标签 .special，而后者选中类为 special 的 p 标签。

```
.special strong { ... }
```

伪类和伪元素选择器：css 选择 html 中没有的 类 (状态) 和 元素（内容）即为伪类（pseudo-class）和 伪元素（pseudo-element）

超链接的伪类：

- `a:link` 链接处于初始状态（未被划过，点击过）时
- `a:visited` 在浏览器的历史记录中已被访问过的链接状态
- `a:hover` 鼠标滑到链接上的状态（该伪类也可用于其他标签）
- `a:active` 鼠标按在链接上仍未放开的状态

段落的伪元素：

- `::first-letter` 段落的首个字符
- `::first-line` 段落的首行

注意：伪类与伪元素原先都使用 `:` 标记，在 CSS3 中 `::` 来标记伪元素，但是 IE8 中不支持这种语法。

更多伪类与伪元素：

- `:focus` 表示访问者当前注意的页面位置，即：焦点，常用于给访问者提供输入框的反馈
- `::before` 在选中的元素前添加内容, 这种添加文本的技术称为「创造内容」，浏览器本身就包含很多这类处理，比如为列表 ul 的 li 前添加的项目符号。 例：`p.tip:before {content: "HOT TIP!";}`
- `::after` 在选中元素的后面添加内容
- `::selection` 访问者在网页上选中的内容，这个选择器只能设置 `color` 和 `backgroud-color` 两种属性，另外该选择器无单冒号版本。


属性选择器：通过标签的属性来选择对应的标签。其属性可精确或模糊匹配，`^=` 表示以 ... 开始，`$=` 表示以 ... 结束，`*=` 表示属性值中包含 ...

```
--- HTML ---
<img class="for-img" name="img-name" />
<a href="http://url.com"> ... </a>
<a href="https://url.com"> ... </a>
<a href="http://url.pdf"> ... </a>

--- CSS ---
.for-img[name="img-name"] { ... }

a[href^="http://"], a[href^="https://"] { ... }
a[href$=".pdf"] { ... }
a[href*="url"] { ... }
```

子选择器：区别于派生选择器，子选择器只选中父类标签的直接子标签，例如：

```
--- HTML ---
<body>
	<p id="p-1"> ... </p>
	<div>
		<p id="p-2"> ... </p>
	</div>
	<p id="p-3"> ... </p>
</body>

--- CSS ---
/* 派生选择器会选中 body 中所有的 p #p-1 #p-2 #p-3*/
body p { ... }

/* 子选择器只选中 body 的直接子标签 p #p-1 #p-3 */
body > p { ... }

```

其他子元素相关伪类：

- `:first-child` 选择第一个子元素 如：`p:first-child { ... }`
- `:last-child` 选择最后一个子元素 如：`ul li:last-child { ... }`
- `:nth-child` 自定义要选中的子元素

```
/* 子元素列表中逢奇数 && 偶数的元素 */
tr:nth-child(odd) { ... }
tr:nth-child(even) { ... }

/* 子元素列表中逢 n 的元素 */
tr td:nth-child(3n + 1) { ... }
```

子类型选择器：区别于子选择器直接通过标签的位置来确定子元素，子类型选择器通过自定义特定的类型再配合位置来确定

- `:first-of-type` 选择具体类别下的第一个元素

```
--- HTML ---
<body>
<h1> ... </h1>
<p id="p-1"> ... </p> 
<p id="p-2"> ... </p>
</body>


--- CSS ---
/* 因为 p 元素不是 body 的第一个标签所以这里没有元素被选中 */
body p:first-child { ... }

/* 这里表示在 body 中找到标签为 p 的第一个元素，故 #p-1 被选中*/
body p:first-of-type { ... }
```

- `:last-of-type` 选择具体类别下的最后一个元素
- `:nth-of-type` 自定义要选中的具体类别的子元素，用法类似 :nth-child

同胞选择器： 

- `+` 选中元素对应的下一个特定的同胞元素。例：`h1 + p { ... }`
- `~` 选中元素对应的所有特定的同胞元素。例：`h1 ~ p { ... }`

否定伪类: `:not()`，选中不是某种特性的其他元素。否定伪类的限制：

- 只能使用简单的选择器，如：标签选择器，通用选择器，类选择器，ID选择器，伪类选择器
- 不可用于派生选择器，伪元素选择器，群组选择器，子选择器，同胞选择器等组合选择器
- 不可同时连接多个 :not() 选择器

	例：

```
p:not(.normal) { ... }
a[href^="http://"]:not([href^="http://url.com"] { ... })
```

## 继承

继承：应用在一个标签上的 CSS 样式会被其派生的标签继承

样式不会被继承的情况：

- 影响网页元素的位置，边距，背景色，边框线等属性不会被继承；
- web浏览器固有的样式；如：在 body 中设置 font-size，h1 标签的字体仍然会大于 p；在 body 中设置字体颜色，页面中的链接依然是浏览器默认的样式；
- 当有样式冲突时，更具体的样式会被优先采用

## 样式层叠管理

层叠：（cascade）一种CSS用于管理样式叠加的机制。

一般叠加规则：

- 继承的样式会叠加
- 更靠近的祖先样式优先
- 直接应用到元素上的样式优先

冲突样式的解决机制：样式的权重值

选择器的权重值：

- 标签、伪元素选择器：1分
- 类、伪类选择器：10分
- ID选择器：100分
- 内建样式：1000分
- 派生选择器：所有选择器值得总和

另外：继承的样式属性没有权重值

最高优先级：在属性值的后面加上 `!important`，对于同时使用 !important 的冲突样式，已跟具体的样式优先

控制层叠：

- 通过添加选择器来提高权重值
- 选择性地覆盖：元素的基础样式表+特殊处理样式表
- 避免权重战争：ID选择器的权重值较大，尽量避免使用，造成选择器冗长
- 重新创建样式：CSS reset 避免各浏览器内建样式间的差别